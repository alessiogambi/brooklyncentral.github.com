<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- **************************************************************** -->
<!-- *  PLEASE KEEP COMPLICATED EXPRESSIONS OUT OF THESE TEMPLATES, * -->
<!-- *  i.e. only iterate & print data where possible. Thanks, Jez. * -->
<!-- **************************************************************** -->

<html>
<head>
<!-- Generated by groovydoc (1.8.6) on Fri May 23 10:53:13 MDT 2014 -->
<title>HighAvailabilityManagerImpl (Brooklyn)</title>
<meta name="date" content="2014-05-23">
<link href="../../../groovy.ico" type="image/x-icon" rel="shortcut icon">
<link href="../../../groovy.ico" type="image/x-icon" rel="icon">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HighAvailabilityManagerImpl (Brooklyn)";
    }
}
</script>
<noscript>
</noscript>

</head><body onload="windowTitle();" bgcolor="white">
<hr>

<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>

  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <!--<TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  -->
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>Brooklyn</b>
</EM></TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><!--<FONT SIZE="-2">
&nbsp;<A HREF="../../../groovy/lang/ExpandoMetaClass.ExpandoMetaProperty.html" title="class in groovy.lang"><B>PREV CLASS</B></A>&nbsp;

&nbsp;<A HREF="../../../groovy/lang/GroovyClassLoader.html" title="class in groovy.lang"><B>NEXT CLASS</B></A></FONT>--></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?brooklyn/management/ha/HighAvailabilityManagerImpl.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="HighAvailabilityManagerImpl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<script type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-frame.html"><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
  <A HREF="../../../allclasses-frame.html"><B>All Classes</B></A>
</noscript>

</FONT></TD>

</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
SUMMARY:&nbsp;<A HREF="#nested_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- ========= END OF TOP NAVBAR ========= -->


<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>

<FONT SIZE="-1">
brooklyn.management.ha</FONT>
<BR>

<span CLASS="ClassTitleFont">[Java] Class HighAvailabilityManagerImpl</span></H2>
<pre>java.lang.Object
  <img src='../../../inherit.gif'>brooklyn.management.ha.HighAvailabilityManagerImpl
</pre><dl><dt><b>All Implemented Interfaces:</b> </dt><dd><a href='../../../brooklyn/management/ha/HighAvailabilityManager.html'>HighAvailabilityManager</a></dd></dl><hr>
<PRE>@Beta
public&nbsp;class HighAvailabilityManagerImpl

</PRE>

<P>
 This is the guts of the high-availability solution in Brooklyn.
 <p>
 Multiple brooklyn nodes can be started to form a single management plane, where one node is 
 designated master and the others are "warm standbys". On termination or failure of the master,
 the standbys deterministically decide which standby should become master (see MasterChooser).
 That standby promotes itself.
 <p>
 The management nodes communicate their health/status via the ManagementPlaneSyncRecordPersister.
 For example, if using ManagementPlaneSyncRecordPersisterToMultiFile with a shared NFS mount, 
 then each management-node periodically writes its state. This acts as a heartbeat, being read by
 the other management-nodes.
 <p>
 Promotion to master involves:
 <ol>
   <li>notifying the other management-nodes that it is now master
   <li>calling RebindManager#rebind()#rebind() to read all persisted entity state, and thus reconstitute the entities.
 </ol>
 <p>
 Future improvements in this area will include brooklyn-managing-brooklyn to decide + promote
 the standby.
 <DL><DT><B>Authors:</B></DT><DD>aled</DD></DL><DL><DT><B>Since:</B></DT><DD>0.7.0</DD></DL>
</P>
<hr>


<!-- =========== NESTED CLASS SUMMARY =========== -->

<A NAME="nested_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
    <B>Nested Class Summary</B></FONT></TH>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>static&nbsp;interface</CODE></FONT></TD>
        <TD>
            <CODE><a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.PromotionListener.html'>HighAvailabilityManagerImpl.PromotionListener</a></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;


<!-- =========== ENUM CONSTANT SUMMARY =========== -->

<A NAME="enum_constant_summary"><!-- --></A>


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>


<!-- =========== PROPERTY SUMMARY =========== -->

<A NAME="property_summary"><!-- --></A>


<!-- =========== ELEMENT SUMMARY =========== -->



<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#D5D5FF" CLASS="TableHeadingColor">
    <TD COLSPAN=2><FONT SIZE="+2">
    <B>Constructor Summary</B></FONT></TD>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD>
            <CODE><B><a href="#HighAvailabilityManagerImpl(brooklyn.management.internal.ManagementContextInternal)">HighAvailabilityManagerImpl</a></B>(<a href='../../../brooklyn/management/internal/ManagementContextInternal.html'>ManagementContextInternal</a> managementContext)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2" CLASS="ClassHeadingFont">
    <B>Method Summary</B></FONT></TH>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#checkMaster()">checkMaster</a></b>()</CODE>
            <BR>
            <P>Looks up the state of all nodes in the management plane, and checks if the master is still ok.
 </P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementNodeSyncRecord.html'>ManagementNodeSyncRecord</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#createManagementNodeSyncRecord()">createManagementNodeSyncRecord</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;long</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#currentTimeMillis()">currentTimeMillis</a></b>()</CODE>
            <BR>
            <P>Gets the current time, using the <a href='#ticker'>ticker</a>. </P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#disabled()">disabled</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#doPollTask()">doPollTask</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecord.html'>ManagementPlaneSyncRecord</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#getManagementPlaneSyncState()">getManagementPlaneSyncState</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/ManagementNodeState.html'>ManagementNodeState</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#getNodeState()">getNodeState</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecordPersister.html'>ManagementPlaneSyncRecordPersister</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#getPersister()">getPersister</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementNodeSyncRecord.html'>ManagementNodeSyncRecord</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#hasHealthyMaster()">hasHealthyMaster</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;boolean</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#isHeartbeatOk(brooklyn.management.ha.ManagementNodeSyncRecord, long)">isHeartbeatOk</a></b>(<a href='../../../brooklyn/management/ha/ManagementNodeSyncRecord.html'>ManagementNodeSyncRecord</a> memento, long now)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>boolean</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#isRunning()">isRunning</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecord.html'>ManagementPlaneSyncRecord</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#loadManagementPlaneSyncRecord(boolean)">loadManagementPlaneSyncRecord</a></b>(boolean replaceLocalNodeWithCurrentRecord)</CODE>
            <BR>
            <P>@param replaceLocalNodeWithCurrentRecord - if true, the record for this mgmt node will be replaced with the
 actual current status known in this JVM (may be more recent than what is on disk);
 normally there is no reason to care because data is persisted to disk immediately
 after any significant change, but for fringe cases this is perhaps more accurate (perhaps remove in time?)</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#promoteToMaster()">promoteToMaster</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#publishHealth()">publishHealth</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#publishPromotionToMaster()">publishPromotionToMaster</a></b>()</CODE>
            <BR>
            <P>Publishes (via <a href='#persister'>persister</a>) the state of this management node with itself set to master.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#registerPollTask()">registerPollTask</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#setHeartbeatTimeout(brooklyn.util.time.Duration)">setHeartbeatTimeout</a></b>(<a href='../../../brooklyn/util/time/Duration.html'>Duration</a> val)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#setMasterChooser(brooklyn.management.ha.MasterChooser)">setMasterChooser</a></b>(<a href='../../../brooklyn/management/ha/MasterChooser.html'>MasterChooser</a> val)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#setPersister(brooklyn.management.ha.ManagementPlaneSyncRecordPersister)">setPersister</a></b>(<a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecordPersister.html'>ManagementPlaneSyncRecordPersister</a> persister)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#setPollPeriod(brooklyn.util.time.Duration)">setPollPeriod</a></b>(<a href='../../../brooklyn/util/time/Duration.html'>Duration</a> val)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#setPromotionListener(brooklyn.management.ha.HighAvailabilityManagerImpl.PromotionListener)">setPromotionListener</a></b>(<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.PromotionListener.html'>HighAvailabilityManagerImpl.PromotionListener</a> val)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#setTicker(Ticker)">setTicker</a></b>(<a href='../../../Ticker.html'>Ticker</a> val)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#start(brooklyn.management.ha.HighAvailabilityMode)">start</a></b>(<a href='../../../brooklyn/management/ha/HighAvailabilityMode.html'>HighAvailabilityMode</a> startMode)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#stop()">stop</a></b>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementNodeState.html'>ManagementNodeState</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#toNodeStateForPersistence(brooklyn.management.ha.ManagementNodeState)">toNodeStateForPersistence</a></b>(<a href='../../../brooklyn/management/ha/ManagementNodeState.html'>ManagementNodeState</a> nodeState)</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;
<table BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
                <tr CLASS="TableSubHeadingColor"><th ALIGN="left" COLSPAN="2">
                <b>Methods inherited from class java.lang.Object</b>
                </th></tr>
                <tr class="TableRowColor"><td colspan='2'>java.lang.Object#wait(long, int), java.lang.Object#wait(long), java.lang.Object#wait(), java.lang.Object#equals(java.lang.Object), java.lang.Object#toString(), java.lang.Object#hashCode(), java.lang.Object#getClass(), java.lang.Object#notify(), java.lang.Object#notifyAll()</td></tr>
                </table>
                &nbsp;

<P>

<!-- ============ ENUM CONSTANT DETAIL ========== -->

<A NAME="enum_constant_detail"><!-- --></A>


<!-- =========== FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>


<!-- =========== PROPERTY DETAIL =========== -->

<A NAME="prop_detail"><!-- --></A>


<!-- =========== ELEMENT DETAIL =========== -->

<A NAME="element_detail"><!-- --></A>


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
    <B>Constructor Detail</B></FONT></TH>
    </TR>
    </TABLE>
    
        <A NAME="HighAvailabilityManagerImpl(brooklyn.management.internal.ManagementContextInternal)"><!-- --></A><H3>
        HighAvailabilityManagerImpl</H3>
        <PRE>public&nbsp;<B>HighAvailabilityManagerImpl</B>(<a href='../../../brooklyn/management/internal/ManagementContextInternal.html'>ManagementContextInternal</a> managementContext)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
    &nbsp;


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
    <B>Method Detail</B></FONT></TH>
    </TR>
    </TABLE>
    
        <A NAME="checkMaster()"><!-- --></A><H3>
        checkMaster</H3>
        <PRE>protected&nbsp;void <B>checkMaster</B>()</PRE>
        <DL>
        <DD> Looks up the state of all nodes in the management plane, and checks if the master is still ok.
 If it's not then determines which node should be promoted to master. If it is ourself, then promotes.
     
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="createManagementNodeSyncRecord()"><!-- --></A><H3>
        createManagementNodeSyncRecord</H3>
        <PRE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementNodeSyncRecord.html'>ManagementNodeSyncRecord</a> <B>createManagementNodeSyncRecord</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="currentTimeMillis()"><!-- --></A><H3>
        currentTimeMillis</H3>
        <PRE>protected&nbsp;long <B>currentTimeMillis</B>()</PRE>
        <DL>
        <DD> Gets the current time, using the <a href='#ticker'>ticker</a>. Normally this is equivalent of java.lang.System#currentTimeMillis(),
 but in test environments a custom Ticker can be injected via <a href='#setTicker(Ticker)'>setTicker(Ticker)</a> to allow testing of
 specific timing scenarios.
     
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="disabled()"><!-- --></A><H3>
        disabled</H3>
        <PRE>@Override
public&nbsp;void <B>disabled</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="doPollTask()"><!-- --></A><H3>
        doPollTask</H3>
        <PRE>protected&nbsp;void <B>doPollTask</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="getManagementPlaneSyncState()"><!-- --></A><H3>
        getManagementPlaneSyncState</H3>
        <PRE>@Override
public&nbsp;<a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecord.html'>ManagementPlaneSyncRecord</a> <B>getManagementPlaneSyncState</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="getNodeState()"><!-- --></A><H3>
        getNodeState</H3>
        <PRE>@Override
public&nbsp;<a href='../../../brooklyn/management/ha/ManagementNodeState.html'>ManagementNodeState</a> <B>getNodeState</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="getPersister()"><!-- --></A><H3>
        getPersister</H3>
        <PRE>@Override
public&nbsp;<a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecordPersister.html'>ManagementPlaneSyncRecordPersister</a> <B>getPersister</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="hasHealthyMaster()"><!-- --></A><H3>
        hasHealthyMaster</H3>
        <PRE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementNodeSyncRecord.html'>ManagementNodeSyncRecord</a> <B>hasHealthyMaster</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="isHeartbeatOk(brooklyn.management.ha.ManagementNodeSyncRecord, long)"><!-- --></A><H3>
        isHeartbeatOk</H3>
        <PRE>protected&nbsp;boolean <B>isHeartbeatOk</B>(<a href='../../../brooklyn/management/ha/ManagementNodeSyncRecord.html'>ManagementNodeSyncRecord</a> memento, long now)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="isRunning()"><!-- --></A><H3>
        isRunning</H3>
        <PRE>@Override
public&nbsp;boolean <B>isRunning</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="loadManagementPlaneSyncRecord(boolean)"><!-- --></A><H3>
        loadManagementPlaneSyncRecord</H3>
        <PRE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecord.html'>ManagementPlaneSyncRecord</a> <B>loadManagementPlaneSyncRecord</B>(boolean replaceLocalNodeWithCurrentRecord)</PRE>
        <DL>
        <DD>
     <DL><DT><B>Parameters:</B></DT><DD><code>replaceLocalNodeWithCurrentRecord</code> -  - if true, the record for this mgmt node will be replaced with the
 actual current status known in this JVM (may be more recent than what is on disk);
 normally there is no reason to care because data is persisted to disk immediately
 after any significant change, but for fringe cases this is perhaps more accurate (perhaps remove in time?)</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="promoteToMaster()"><!-- --></A><H3>
        promoteToMaster</H3>
        <PRE>protected&nbsp;void <B>promoteToMaster</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="publishHealth()"><!-- --></A><H3>
        publishHealth</H3>
        <PRE>protected&nbsp;void <B>publishHealth</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="publishPromotionToMaster()"><!-- --></A><H3>
        publishPromotionToMaster</H3>
        <PRE>protected&nbsp;void <B>publishPromotionToMaster</B>()</PRE>
        <DL>
        <DD> Publishes (via <a href='#persister'>persister</a>) the state of this management node with itself set to master.
     
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="registerPollTask()"><!-- --></A><H3>
        registerPollTask</H3>
        <PRE>@SuppressWarnings("unchecked")
protected&nbsp;void <B>registerPollTask</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="setHeartbeatTimeout(brooklyn.util.time.Duration)"><!-- --></A><H3>
        setHeartbeatTimeout</H3>
        <PRE>public&nbsp;<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a> <B>setHeartbeatTimeout</B>(<a href='../../../brooklyn/util/time/Duration.html'>Duration</a> val)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="setMasterChooser(brooklyn.management.ha.MasterChooser)"><!-- --></A><H3>
        setMasterChooser</H3>
        <PRE>public&nbsp;<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a> <B>setMasterChooser</B>(<a href='../../../brooklyn/management/ha/MasterChooser.html'>MasterChooser</a> val)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="setPersister(brooklyn.management.ha.ManagementPlaneSyncRecordPersister)"><!-- --></A><H3>
        setPersister</H3>
        <PRE>@Override
public&nbsp;<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a> <B>setPersister</B>(<a href='../../../brooklyn/management/ha/ManagementPlaneSyncRecordPersister.html'>ManagementPlaneSyncRecordPersister</a> persister)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="setPollPeriod(brooklyn.util.time.Duration)"><!-- --></A><H3>
        setPollPeriod</H3>
        <PRE>public&nbsp;<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a> <B>setPollPeriod</B>(<a href='../../../brooklyn/util/time/Duration.html'>Duration</a> val)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="setPromotionListener(brooklyn.management.ha.HighAvailabilityManagerImpl.PromotionListener)"><!-- --></A><H3>
        setPromotionListener</H3>
        <PRE>public&nbsp;<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a> <B>setPromotionListener</B>(<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.PromotionListener.html'>HighAvailabilityManagerImpl.PromotionListener</a> val)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="setTicker(Ticker)"><!-- --></A><H3>
        setTicker</H3>
        <PRE>public&nbsp;<a href='../../../brooklyn/management/ha/HighAvailabilityManagerImpl.html'>HighAvailabilityManagerImpl</a> <B>setTicker</B>(<a href='../../../Ticker.html'>Ticker</a> val)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="start(brooklyn.management.ha.HighAvailabilityMode)"><!-- --></A><H3>
        start</H3>
        <PRE>@Override
public&nbsp;void <B>start</B>(<a href='../../../brooklyn/management/ha/HighAvailabilityMode.html'>HighAvailabilityMode</a> startMode)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="stop()"><!-- --></A><H3>
        stop</H3>
        <PRE>@Override
public&nbsp;void <B>stop</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="toNodeStateForPersistence(brooklyn.management.ha.ManagementNodeState)"><!-- --></A><H3>
        toNodeStateForPersistence</H3>
        <PRE>protected&nbsp;<a href='../../../brooklyn/management/ha/ManagementNodeState.html'>ManagementNodeState</a> <B>toNodeStateForPersistence</B>(<a href='../../../brooklyn/management/ha/ManagementNodeState.html'>ManagementNodeState</a> nodeState)</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
    &nbsp;


<!-- ========= END OF CLASS DATA ========= -->
<p><b>Brooklyn Multi-Cloud Application Management Platform</b> <br/> <a href="http://brooklyncentral.github.com/" target="_top">brooklyncentral.github.com</a>. Apache License. &copy; 2012.</p>
<hr>

</body>
</html>
